<div class="dashboard-container" *ngIf="currentUser">
  <header class="dashboard-header">
    <h1>Bienvenido al Dashboard</h1>
    <div class="user-info">
      <div class="user-details">
        <h2>{{ getUserName() }}</h2>
        <p>{{ getCurrentEmail() }}</p>
        <span class="user-role">{{ getUserRole() }}</span>
      </div>
      <div class="actions">
        <button (click)="logout()" class="logout-btn">Cerrar Sesión</button>
      </div>
    </div>
  </header>

  <main class="dashboard-content">
    <!-- Métricas principales -->
    <section class="metrics">
      <div class="card">
        <h3>Usuarios</h3>
        <p class="value">{{ getUsersCount() }}</p>
        <span class="hint">Total de usuarios permitidos</span>
      </div>
      <div class="card">
        <h3>Gmail</h3>
        <p class="value">{{ getCurrentEmail() }}</p>
        <span class="hint">Correo de la sesión actual</span>
      </div>
      <div class="card warning">
        <h3>Contraseña</h3>
        <p class="value">{{ getCurrentPassword() }}</p>
        <span class="hint">Correo de la sesión actual</span>
      </div>
    </section>
    <hr>
    <!-- Estadísticas de ventas -->
    <section class="sales-section">
      <app-sales-stats></app-sales-stats>
    </section>
    <hr>
    <!-- Gráfica de clics en productos -->
    <section class="product-stats">
      <app-product-chart></app-product-chart>
    </section>
  </main>
  <hr>
  <!-- Gestión de usuarios (solo admin) -->
  <section class="admin-users" *ngIf="isAdmin()">
    <h3>Gestión de Usuarios</h3>
    <div class="users-list">
      <div class="user-row" *ngFor="let u of getAllowedUsers()">
        <div class="info">
          <strong>{{ u.name }}</strong>
          <span>{{ u.email }}</span>
          <span class="role">{{ u.role }}</span>
        </div>
        <button 
          *ngIf="!(u.email === getCurrentEmail() && isAdmin())"
          class="delete-btn" 
          (click)="deleteUser(u.email)">
          Eliminar
        </button>
      </div>
    </div>
  </section>
</div>

<div *ngIf="!currentUser" class="loading">
  <p>Cargando...</p>
</div>

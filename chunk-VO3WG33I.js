import{a as O,b as d,c as S,d as y,e as I,f as R,g as k,h as L,i as T}from"./chunk-XX76IJ3W.js";import{d as E,e as w,g as F}from"./chunk-E3BUGX3N.js";import{a as z}from"./chunk-WQJ3ILH5.js";import{l as M,n as P}from"./chunk-GDGZUMXV.js";import{Aa as b,Na as c,Pa as l,Ra as f,Sa as o,Ta as i,Ua as x,Ya as h,Za as g,_,cb as a,eb as p,gb as C,za as n}from"./chunk-6VMPXGO3.js";function N(e,m){if(e&1&&(o(0,"div",20),a(1),i()),e&2){let t=g();n(),p(" ",t.getFieldError("name")," ")}}function q(e,m){if(e&1&&(o(0,"div",20),a(1),i()),e&2){let t=g();n(),p(" ",t.getFieldError("email")," ")}}function D(e,m){if(e&1&&(o(0,"div",20),a(1),i()),e&2){let t=g();n(),p(" ",t.getFieldError("password")," ")}}function G(e,m){if(e&1&&(o(0,"div",20),a(1),i()),e&2){let t=g();n(),p(" ",t.getFieldError("confirmPassword")," ")}}function j(e,m){if(e&1&&(o(0,"div",21),a(1),i()),e&2){let t=g();n(),p(" ",t.errorMessage," ")}}function Y(e,m){if(e&1&&(o(0,"div",22),a(1),i()),e&2){let t=g();n(),p(" ",t.successMessage," ")}}function A(e,m){e&1&&(o(0,"span"),a(1,"Registrarse"),i())}function V(e,m){e&1&&(o(0,"span"),a(1,"Registrando..."),i())}var X=(()=>{class e{constructor(t,s,r){this.fb=t,this.authService=s,this.router=r,this.isLoading=!1,this.errorMessage="",this.successMessage="",this.registerForm=this.fb.group({name:["",[d.required,d.minLength(3)]],email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],confirmPassword:["",[d.required]]})}onSubmit(){if(this.registerForm.valid){let{name:t,email:s,password:r,confirmPassword:v}=this.registerForm.value;if(r!==v){this.errorMessage="Las contrase\xF1as no coinciden";return}this.isLoading=!0,this.errorMessage="",this.successMessage="",this.authService.register(s,r,t).subscribe({next:u=>{this.isLoading=!1,u.success?(this.successMessage=u.message+". Redirigiendo al login...",setTimeout(()=>{this.router.navigate(["/login"])},2e3)):this.errorMessage=u.message},error:u=>{this.isLoading=!1,this.errorMessage="Error al registrar. Int\xE9ntalo de nuevo.",console.error("Register error:",u)}})}else this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.registerForm.controls).forEach(t=>{this.registerForm.get(t)?.markAsTouched()})}getFieldError(t){let s=this.registerForm.get(t);if(s?.errors&&s.touched){if(s.errors.required)return`${{name:"Nombre",email:"Email",password:"Contrase\xF1a",confirmPassword:"Confirmar contrase\xF1a"}[t]} es requerido`;if(s.errors.email)return"Email inv\xE1lido";if(s.errors.minlength)return t==="name"?"El nombre debe tener al menos 3 caracteres":"La contrase\xF1a debe tener al menos 6 caracteres"}return""}static{this.\u0275fac=function(s){return new(s||e)(b(L),b(z),b(E))}}static{this.\u0275cmp=_({type:e,selectors:[["app-register"]],standalone:!0,features:[C],decls:38,vars:20,consts:[[1,"register-container"],[1,"register-card"],[1,"register-header"],[1,"register-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name","placeholder","Juan P\xE9rez",1,"form-control"],["class","error-message",4,"ngIf"],["for","email"],["type","email","id","email","formControlName","email","placeholder","tu@email.com",1,"form-control"],["for","password"],["type","password","id","password","formControlName","password","placeholder","M\xEDnimo 6 caracteres",1,"form-control"],["for","confirmPassword"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","Repite tu contrase\xF1a",1,"form-control"],["class","error-message global-error",4,"ngIf"],["class","success-message",4,"ngIf"],["type","submit",1,"register-button",3,"disabled"],[4,"ngIf"],[1,"login-link"],["routerLink","/login"],[1,"error-message"],[1,"error-message","global-error"],[1,"success-message"]],template:function(s,r){s&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),a(4,"Crear Cuenta"),i(),o(5,"p"),a(6,"Reg\xEDstrate como cliente en EiaoStore"),i()(),o(7,"form",3),h("ngSubmit",function(){return r.onSubmit()}),o(8,"div",4)(9,"label",5),a(10,"Nombre Completo"),i(),x(11,"input",6),c(12,N,2,1,"div",7),i(),o(13,"div",4)(14,"label",8),a(15,"Email"),i(),x(16,"input",9),c(17,q,2,1,"div",7),i(),o(18,"div",4)(19,"label",10),a(20,"Contrase\xF1a"),i(),x(21,"input",11),c(22,D,2,1,"div",7),i(),o(23,"div",4)(24,"label",12),a(25,"Confirmar Contrase\xF1a"),i(),x(26,"input",13),c(27,G,2,1,"div",7),i(),c(28,j,2,1,"div",14)(29,Y,2,1,"div",15),o(30,"button",16),c(31,A,2,0,"span",17)(32,V,2,0,"span",17),i()(),o(33,"div",18)(34,"p"),a(35,"\xBFYa tienes cuenta? "),o(36,"a",19),a(37,"Inicia sesi\xF3n aqu\xED"),i()()()()()),s&2&&(n(7),l("formGroup",r.registerForm),n(4),f("error",r.getFieldError("name")),n(),l("ngIf",r.getFieldError("name")),n(4),f("error",r.getFieldError("email")),n(),l("ngIf",r.getFieldError("email")),n(4),f("error",r.getFieldError("password")),n(),l("ngIf",r.getFieldError("password")),n(4),f("error",r.getFieldError("confirmPassword")),n(),l("ngIf",r.getFieldError("confirmPassword")),n(),l("ngIf",r.errorMessage),n(),l("ngIf",r.successMessage),n(),f("loading",r.isLoading),l("disabled",r.isLoading),n(),l("ngIf",!r.isLoading),n(),l("ngIf",r.isLoading))},dependencies:[P,M,T,I,O,S,y,R,k,F,w],styles:[".register-container[_ngcontent-%COMP%]{height:100dvh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,red,#000);padding:20px;margin:0}.register-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 20px 40px #0000001a;padding:40px;width:100%;max-width:500px;animation:_ngcontent-%COMP%_slideUp .6s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(50px)}to{opacity:1;transform:translateY(0)}}.register-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.register-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;font-size:28px;font-weight:600;margin:0 0 8px}.register-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:16px;margin:0}.register-form[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;color:#333;font-weight:500;font-size:14px}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e1e5e9;border-radius:8px;font-size:16px;transition:all .3s ease;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-control.error[_ngcontent-%COMP%]{border-color:#e74c3c}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:12px;margin-top:4px;display:block}.global-error[_ngcontent-%COMP%]{background:#fdf2f2;border:1px solid #fecaca;border-radius:6px;padding:12px;margin-bottom:20px;text-align:center}.success-message[_ngcontent-%COMP%]{background:#f0fdf4;border:1px solid #86efac;border-radius:6px;padding:12px;margin-bottom:20px;text-align:center;color:#16a34a;font-size:14px}.register-button[_ngcontent-%COMP%]{width:100%;background:linear-gradient(135deg,red,#000);color:#fff;border:none;border-radius:8px;padding:14px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden}.register-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 25px #667eea4d}.register-button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed;transform:none}.register-button.loading[_ngcontent-%COMP%]{background:#94a3b8}.login-link[_ngcontent-%COMP%]{text-align:center;padding-top:20px;border-top:1px solid #e2e8f0}.login-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#64748b}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:red;text-decoration:none;font-weight:600;transition:color .3s ease}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#000;text-decoration:underline}"]})}}return e})();export{X as RegisterComponent};

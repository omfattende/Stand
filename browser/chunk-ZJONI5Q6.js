import{a as E,b as d,c as w,d as S,e as F,f as y,g as L,h as I,i as D}from"./chunk-XX76IJ3W.js";import{d as P,e as O,g as k}from"./chunk-E3BUGX3N.js";import{a as q}from"./chunk-WQJ3ILH5.js";import{l as v,n as M}from"./chunk-GDGZUMXV.js";import{Aa as g,Na as c,Pa as l,Ra as u,Sa as o,Ta as i,Ua as h,Ya as f,Za as x,_,cb as a,eb as b,gb as C,za as s}from"./chunk-6VMPXGO3.js";function T(n,m){if(n&1&&(o(0,"div",20),a(1),i()),n&2){let t=x();s(),b(" ",t.getFieldError("email")," ")}}function z(n,m){if(n&1&&(o(0,"div",20),a(1),i()),n&2){let t=x();s(),b(" ",t.getFieldError("password")," ")}}function A(n,m){if(n&1&&(o(0,"div",21),a(1),i()),n&2){let t=x();s(),b(" ",t.errorMessage," ")}}function N(n,m){n&1&&(o(0,"span"),a(1,"Iniciar Sesi\xF3n"),i())}function j(n,m){n&1&&(o(0,"span"),a(1,"Iniciando sesi\xF3n..."),i())}var J=(()=>{class n{constructor(t,r,e){this.fb=t,this.authService=r,this.router=e,this.isLoading=!1,this.errorMessage="",this.adminAccount={email:"admin@stand.com",password:"123456",type:"Administrador"},this.clientAccount={email:"cliente@stand.com",password:"123456",type:"Cliente Demo"},this.loginForm=this.fb.group({email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]]})}onSubmit(){if(this.loginForm.valid){this.isLoading=!0,this.errorMessage="";let{email:t,password:r}=this.loginForm.value;this.authService.login(t,r).subscribe({next:e=>{if(this.isLoading=!1,e){let p=this.authService.getCurrentUser();console.log("Usuario autenticado:",p),this.authService.isAdmin()?this.router.navigate(["/admin"]):this.router.navigate(["/home"])}else this.errorMessage="Credenciales incorrectas o usuario no autorizado."},error:e=>{this.isLoading=!1,this.errorMessage="Error al iniciar sesi\xF3n. Int\xE9ntalo de nuevo.",console.error("Login error:",e)}})}else this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.loginForm.controls).forEach(t=>{this.loginForm.get(t)?.markAsTouched()})}getFieldError(t){let r=this.loginForm.get(t);if(r?.errors&&r.touched){if(r.errors.required)return`${t==="email"?"Email":"Contrase\xF1a"} es requerido`;if(r.errors.email)return"Email inv\xE1lido";if(r.errors.minlength)return"La contrase\xF1a debe tener al menos 6 caracteres"}return""}fillForm(t){this.loginForm.patchValue({email:t.email,password:t.password})}static{this.\u0275fac=function(r){return new(r||n)(g(I),g(q),g(P))}}static{this.\u0275cmp=_({type:n,selectors:[["app-login"]],standalone:!0,features:[C],decls:35,vars:13,consts:[[1,"login-container"],[1,"login-card"],[1,"login-header"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email","placeholder","admin@stand.com",1,"form-control"],["class","error-message",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password","placeholder","123456",1,"form-control"],["class","error-message global-error",4,"ngIf"],["type","submit",1,"login-button",3,"disabled"],[4,"ngIf"],[1,"quick-access"],[1,"quick-title"],[1,"quick-buttons"],["type","button",1,"quick-btn","client-btn",3,"click"],["type","button",1,"quick-btn","admin-btn",3,"click"],[1,"register-link"],["routerLink","/register"],[1,"error-message"],[1,"error-message","global-error"]],template:function(r,e){r&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),a(4,"Iniciar Sesi\xF3n"),i(),o(5,"p"),a(6,"Bienvenido a EiaoStore"),i()(),o(7,"form",3),f("ngSubmit",function(){return e.onSubmit()}),o(8,"div",4)(9,"label",5),a(10,"Email"),i(),h(11,"input",6),c(12,T,2,1,"div",7),i(),o(13,"div",4)(14,"label",8),a(15,"Contrase\xF1a"),i(),h(16,"input",9),c(17,z,2,1,"div",7),i(),c(18,A,2,1,"div",10),o(19,"button",11),c(20,N,2,0,"span",12)(21,j,2,0,"span",12),i()(),o(22,"div",13)(23,"p",14),a(24,"Acceso r\xE1pido:"),i(),o(25,"div",15)(26,"button",16),f("click",function(){return e.fillForm(e.clientAccount)}),a(27," \u{1F464} Entrar como Cliente "),i(),o(28,"button",17),f("click",function(){return e.fillForm(e.adminAccount)}),a(29," \u{1F468}\u200D\u{1F4BC} Entrar como Admin "),i()()(),o(30,"div",18)(31,"p"),a(32,"\xBFNo tienes cuenta? "),o(33,"a",19),a(34,"Reg\xEDstrate aqu\xED"),i()()()()()),r&2&&(s(7),l("formGroup",e.loginForm),s(4),u("error",e.getFieldError("email")),s(),l("ngIf",e.getFieldError("email")),s(4),u("error",e.getFieldError("password")),s(),l("ngIf",e.getFieldError("password")),s(),l("ngIf",e.errorMessage),s(),u("loading",e.isLoading),l("disabled",e.isLoading),s(),l("ngIf",!e.isLoading),s(),l("ngIf",e.isLoading))},dependencies:[M,v,D,F,E,w,S,y,L,k,O],styles:[".login-container[_ngcontent-%COMP%]{height:100dvh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#fafafa,#000);padding:20px;margin:0}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 20px 40px #0000001a;padding:30px;width:100%;max-width:450px;animation:_ngcontent-%COMP%_slideUp .6s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(50px)}to{opacity:1;transform:translateY(0)}}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;font-size:24px;font-weight:600;margin:0 0 6px}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:0}.login-form[_ngcontent-%COMP%]{margin-bottom:30px}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#333;font-weight:500;font-size:13px}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 14px;border:2px solid #e1e5e9;border-radius:8px;font-size:14px;transition:all .3s ease;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-control.error[_ngcontent-%COMP%]{border-color:#e74c3c}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:12px;margin-top:4px;display:block}.global-error[_ngcontent-%COMP%]{background:#fdf2f2;border:1px solid #fecaca;border-radius:6px;padding:12px;margin-bottom:20px;text-align:center}.login-button[_ngcontent-%COMP%]{width:100%;background:#e74c3c;color:#fff;border:none;border-radius:8px;padding:14px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden}.login-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 25px #fff}.login-button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed;transform:none}.login-button.loading[_ngcontent-%COMP%]{background:#fff}.quick-access[_ngcontent-%COMP%]{background:#f8fafc;border-radius:8px;padding:16px;text-align:center;border:1px solid #e2e8f0;margin-bottom:16px}.quick-title[_ngcontent-%COMP%]{margin:0 0 12px;font-size:13px;color:#334155;font-weight:600}.quick-buttons[_ngcontent-%COMP%]{display:flex;gap:10px;flex-direction:column}.quick-btn[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid transparent;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px}.client-btn[_ngcontent-%COMP%]{background:#22c55e;color:#fff}.client-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #22c55e4d;border-color:#22c55e}.admin-btn[_ngcontent-%COMP%]{background:#e74c3c;color:#fff}.admin-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #ff00004d;border-color:red}.register-link[_ngcontent-%COMP%]{text-align:center;padding-top:20px;margin-top:20px;border-top:1px solid #e2e8f0}.register-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#64748b}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:red;text-decoration:none;font-weight:600;transition:color .3s ease}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#000;text-decoration:underline}"]})}}return n})();export{J as LoginComponent};
